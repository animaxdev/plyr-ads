!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("PlyrAds",t):e.PlyrAds=t()}(this,function(){"use strict";var e={adTagUrl:"",skipButton:{enabled:!0,text:"Skip ad",delay:10}},t=(function(){function e(e){this.value=e}function t(t){function n(r,a){try{var o=t[r](a),s=o.value;s instanceof e?Promise.resolve(s.value).then(function(e){n("next",e)},function(e){n("throw",e)}):i(o.done?"return":"normal",o.value)}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?n(r.key,r.arg):a=null}var r,a;this._invoke=function(e,t){return new Promise(function(i,o){var s={key:e,arg:t,resolve:i,reject:o,next:null};a?a=a.next=s:(r=a=s,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r={getStartEvents:function(){var e=["click"];return(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&(e=["touchstart","touchend","touchmove"]),e},mergeConfig:function(e,t){return i({},e,t)}},a=function(){function i(n,a){if(t(this,i),this.config=r.mergeConfig(e,a),!this.config.adTagUrl){if(this.config.debug)throw new Error("No adTagUrl provided.");return this}if(!window.google){if(this.config.debug)throw new Error("The Google IMA3 SDK is not loaded.");return this}this.plyr=n,this.startEvents=r.getStartEvents(),this.adDisplayContainer,this.adDisplayElement,this.adsManager,this.adsLoader,this.adCuePoints,this.currentAd,this.events={},this.videoElement=document.createElement("video"),this._setupAdDisplayContainer(),this._setupIMA(),this._setupListeners()}return n(i,[{key:"_setupIMA",value:function(){var e=this,t=this.plyr.elements.container;this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer,this.videoElement),this.adsLoader.getSettings().setAutoPlayAdBreaks(!1),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){return e._onAdsManagerLoaded(t)},!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(t){return e._onAdError(t)},!1);var n=new google.ima.AdsRequest;n.adTagUrl=this.config.adTagUrl,n.linearAdSlotWidth=t.offsetWidth,n.linearAdSlotHeight=t.offsetHeight,n.nonLinearAdSlotWidth=t.offsetWidth,n.nonLinearAdSlotHeight=t.offsetHeight,this.adsLoader.requestAds(n)}},{key:"_onAdsManagerLoaded",value:function(e){var t=this,n=this.videoElement,i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.enablePreloading=!0,this.adsManager=e.getAdsManager(n,i),this.adsCuePoints=this.adsManager.getCuePoints().filter(function(e){return e>0&&-1!==e}),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){return t._onAdError(e)}),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(e){return t._onAdEvent(e)}),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(e){return t._onAdEvent(e)}),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){return t._onAdEvent(e)}),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,function(e){return t._onAdEvent(e)}),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,function(e){return t._onAdEvent(e)}),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,function(e){return t._onAdEvent(e)}),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(e){return t._onAdEvent(e)})}},{key:"_onAdEvent",value:function(e){var t=this.plyr.elements.container,n=e.getAd();switch(this.currentAd=n,e.type){case google.ima.AdEvent.Type.LOADED:this.adDisplayElement.style.display="block",this._handleEventListeners("LOADED"),n.isLinear()||(n.width=t.offsetWidth,n.height=t.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.plyr.pause(),this._handleEventListeners("STARTED");break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this._handleEventListeners("CONTENT_PAUSE_REQUESTED");break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this._handleEventListeners("CONTENT_RESUME_REQUESTED");break;case google.ima.AdEvent.Type.AD_BREAK_READY:this.plyr.pause(),this.adsManager.start(),this._handleEventListeners("AD_BREAK_READY");break;case google.ima.AdEvent.Type.COMPLETE:this._handleEventListeners("COMPLETE"),this.adDisplayElement.style.display="none",this.plyr.currentTime<this.plyr.duration&&this.plyr.play();break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this._handleEventListeners("ALL_ADS_COMPLETED")}}},{key:"_onAdError",value:function(e){if(this.adDisplayElement.remove(),this.adsManager&&this.adsManager.destroy(),this.config.debug)throw new Error(e)}},{key:"_setupAdDisplayContainer",value:function(){var e=this.plyr.elements.container;this.adDisplayContainer=new google.ima.AdDisplayContainer(e),this.adDisplayElement=e.firstChild,this.adDisplayElement.removeAttribute("style"),this.adDisplayElement.setAttribute("class","plyr-ads"),this._setOnClickHandler(this.adDisplayElement,this._playAds)}},{key:"_playAds",value:function(){var e=this.plyr.elements.container;this.adDisplayContainer.initialize();try{this.adsManager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),this.adsManager.start()}catch(e){if(this.plyr.play(),this.adDisplayElement.remove(),this.config.debug)throw new Error(e)}}},{key:"_setupListeners",value:function(){var e=this,t=this.plyr.elements.container,n=void 0;this.plyr.on("ended",function(t){e.adsLoader.contentComplete()}),this.plyr.on("timeupdate",function(t){var n=t.detail.plyr.currentTime;e.videoElement.currentTime=Math.ceil(n)}),this.plyr.on("seeking",function(e){return n=e.detail.plyr.currentTime}),this.plyr.on("seeked",function(t){for(var i=t.detail.plyr.currentTime,r=0;r<e.adsCuePoints.length;r++){var a=e.adsCuePoints[r];n<a&&a<i&&(e.adsManager.discardAdBreak(),e.adsCuePoints.splice(r,1))}}),window.addEventListener("resize",function(){e.adsManager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)})}},{key:"_handleEventListeners",value:function(e){void 0!==this.events[e]&&this.events[e].call(this)}},{key:"_setOnClickHandler",value:function(e,t){var n=this,i=function(i){e.addEventListener(i,function(e){("touchend"===e.type&&"touchend"===i||"click"===e.type)&&t.call(n)},{once:!0})},r=!0,a=!1,o=void 0;try{for(var s,d=this.startEvents[Symbol.iterator]();!(r=(s=d.next()).done);r=!0){i(s.value)}}catch(e){a=!0,o=e}finally{try{!r&&d.return&&d.return()}finally{if(a)throw o}}}},{key:"on",value:function(e,t){return this.events[e]=t,this}}]),i}();return{init:function(e,t){return new a(e,t)}}});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGx5ci1hZHMuanMiLCJzb3VyY2VzIjpbInNyYy9qcy9kZWZhdWx0cy5qcyIsInNyYy9qcy91dGlscy5qcyIsInNyYy9qcy9wbHlyLWFkcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IGRlZmF1bHRzID0ge1xuICAgIGFkVGFnVXJsOiAnJyxcbiAgICBza2lwQnV0dG9uOiB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIHRleHQ6ICdTa2lwIGFkJyxcbiAgICAgICAgZGVsYXk6IDEwXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBkZWZhdWx0czsiLCJcblxuZXhwb3J0IGNvbnN0IHV0aWxzID0ge1xuXG4gICAgLy8gRXZlbnRzIGFyZSBkaWZmZXJlbnQgb24gdmFyaW91cyBkZXZpY2VzLiBXZSBkZXQgdGhlIGNvcnJlY3QgZXZlbnRzLCBiYXNlZCBvbiB1c2VyQWdlbnQuXG4gICAgZ2V0U3RhcnRFdmVudHM6ICgpID0+IHtcbiAgICAgICAgbGV0IHN0YXJ0RXZlbnRzID0gWydjbGljayddO1xuXG4gICAgICAgIC8vIEZvciBtb2JpbGUgdXNlcnMgdGhlIHN0YXJ0IGV2ZW50IHdpbGwgYmUgb25lIG9mXG4gICAgICAgIC8vIHRvdWNoc3RhcnQsIHRvdWNoZW5kIGFuZCB0b3VjaG1vdmUuXG4gICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmUvaSkgfHxcbiAgICAgICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQYWQvaSkgfHxcbiAgICAgICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSkpIHtcbiAgICAgICAgICAgIHN0YXJ0RXZlbnRzID0gWyd0b3VjaHN0YXJ0JywgJ3RvdWNoZW5kJywgJ3RvdWNobW92ZSddO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGFydEV2ZW50cztcbiAgICB9LFxuXG4gICAgLy8gTWVyZ2UgZGVmYXVsdHMgYW5kIG9wdGlvbnMuXG4gICAgbWVyZ2VDb25maWc6IChkZWZhdWx0cywgb3B0aW9ucykgPT4ge1xuICAgICAgICByZXR1cm4gey4uLmRlZmF1bHRzLCAuLi5vcHRpb25zfTtcbiAgICB9XG59OyIsIi8qKlxuICogVE9ET1xuICogLSBXaGVuIHNlZWtpbmcgbWlkIHJvbGxzIHN0YXJ0IHBsYXlpbmcgYWZ0ZXIgc2Vla2VkLlxuICogICBQb3NzaWJsZSBzb2x1dGlvbjogSW52b2tlIGRpc2NhcmRBZEJyZWFrIGZvciBldmVyeSBza2lwcGVkIG1pZC1yb2xsLlxuICogLSBTZW5kIG91dCBcIi5vblwiIGV2ZW50cyB3aGVuIHNwZWNpZmljIGFkIGV2ZW50cyBoYXBwZW4uXG4gKi9cblxuaW1wb3J0IGRlZmF1bHRzIGZyb20gXCIuL2RlZmF1bHRzXCI7XG5pbXBvcnQgeyB1dGlscyB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmNsYXNzIFBseXJBZHMge1xuICBjb25zdHJ1Y3Rvcih0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICAvLyBTZXQgY29uZmlnXG4gICAgdGhpcy5jb25maWcgPSB1dGlscy5tZXJnZUNvbmZpZyhkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAvLyBDaGVjayBpZiBhbiBhZFRhZ1VybCBpcyBwcm92aWRlZC5cbiAgICBpZiAoIXRoaXMuY29uZmlnLmFkVGFnVXJsKSB7XG4gICAgICBpZiAodGhpcy5jb25maWcuZGVidWcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYWRUYWdVcmwgcHJvdmlkZWQuXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIEdvb2dsZSBJTUEzIFNESyBpcyBsb2FkZWQuXG4gICAgaWYgKCF3aW5kb3cuZ29vZ2xlKSB7XG4gICAgICBpZiAodGhpcy5jb25maWcuZGVidWcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIEdvb2dsZSBJTUEzIFNESyBpcyBub3QgbG9hZGVkLlwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRoaXMucGx5ciA9IHRhcmdldDtcbiAgICB0aGlzLnN0YXJ0RXZlbnRzID0gdXRpbHMuZ2V0U3RhcnRFdmVudHMoKTtcbiAgICB0aGlzLmFkRGlzcGxheUNvbnRhaW5lcjtcbiAgICB0aGlzLmFkRGlzcGxheUVsZW1lbnQ7XG4gICAgdGhpcy5hZHNNYW5hZ2VyO1xuICAgIHRoaXMuYWRzTG9hZGVyO1xuICAgIHRoaXMuYWRDdWVQb2ludHM7XG4gICAgdGhpcy5jdXJyZW50QWQ7XG4gICAgdGhpcy5ldmVudHMgPSB7fTtcbiAgICB0aGlzLnZpZGVvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKTtcblxuICAgIC8vIFNldHVwIHRoZSBhZCBkaXNwbGF5IGNvbnRhaW5lci5cbiAgICB0aGlzLl9zZXR1cEFkRGlzcGxheUNvbnRhaW5lcigpO1xuXG4gICAgLy8gU2V0dXAgdGhlIElNQSBTREsuXG4gICAgdGhpcy5fc2V0dXBJTUEoKTtcblxuICAgIC8vIFNldCBsaXN0ZW5lcnMgb24gdGhlIFBseXIgaW5zdGFuY2UuXG4gICAgdGhpcy5fc2V0dXBMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9zZXR1cElNQSgpIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gdGhpcy5wbHlyLmVsZW1lbnRzO1xuXG4gICAgLy8gQ3JlYXRlIGFkcyBsb2FkZXIuXG4gICAgdGhpcy5hZHNMb2FkZXIgPSBuZXcgZ29vZ2xlLmltYS5BZHNMb2FkZXIoXG4gICAgICB0aGlzLmFkRGlzcGxheUNvbnRhaW5lcixcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50XG4gICAgKTtcblxuICAgIC8vIFRlbGwgdGhlIGFkc0xvYWRlciB3ZSBhcmUgaGFuZGxpbmcgYWQgYnJlYWtzIG1hbnVhbGx5LlxuICAgIHRoaXMuYWRzTG9hZGVyLmdldFNldHRpbmdzKCkuc2V0QXV0b1BsYXlBZEJyZWFrcyhmYWxzZSk7XG5cbiAgICAvLyBMaXN0ZW4gYW5kIHJlc3BvbmQgdG8gYWRzIGxvYWRlZCBhbmQgZXJyb3IgZXZlbnRzLlxuICAgIHRoaXMuYWRzTG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBnb29nbGUuaW1hLkFkc01hbmFnZXJMb2FkZWRFdmVudC5UeXBlLkFEU19NQU5BR0VSX0xPQURFRCxcbiAgICAgIGFkRXZlbnQgPT4gdGhpcy5fb25BZHNNYW5hZ2VyTG9hZGVkKGFkRXZlbnQpLFxuICAgICAgZmFsc2VcbiAgICApO1xuICAgIHRoaXMuYWRzTG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBnb29nbGUuaW1hLkFkRXJyb3JFdmVudC5UeXBlLkFEX0VSUk9SLFxuICAgICAgYWRFcnJvciA9PiB0aGlzLl9vbkFkRXJyb3IoYWRFcnJvciksXG4gICAgICBmYWxzZVxuICAgICk7XG5cbiAgICAvLyBSZXF1ZXN0IHZpZGVvIGFkcy5cbiAgICBjb25zdCBhZHNSZXF1ZXN0ID0gbmV3IGdvb2dsZS5pbWEuQWRzUmVxdWVzdCgpO1xuICAgIGFkc1JlcXVlc3QuYWRUYWdVcmwgPSB0aGlzLmNvbmZpZy5hZFRhZ1VybDtcblxuICAgIC8vIFNwZWNpZnkgdGhlIGxpbmVhciBhbmQgbm9ubGluZWFyIHNsb3Qgc2l6ZXMuIFRoaXMgaGVscHMgdGhlIFNESyB0b1xuICAgIC8vIHNlbGVjdCB0aGUgY29ycmVjdCBjcmVhdGl2ZSBpZiBtdWx0aXBsZSBhcmUgcmV0dXJuZWQuXG4gICAgYWRzUmVxdWVzdC5saW5lYXJBZFNsb3RXaWR0aCA9IGNvbnRhaW5lci5vZmZzZXRXaWR0aDtcbiAgICBhZHNSZXF1ZXN0LmxpbmVhckFkU2xvdEhlaWdodCA9IGNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7XG4gICAgYWRzUmVxdWVzdC5ub25MaW5lYXJBZFNsb3RXaWR0aCA9IGNvbnRhaW5lci5vZmZzZXRXaWR0aDtcbiAgICBhZHNSZXF1ZXN0Lm5vbkxpbmVhckFkU2xvdEhlaWdodCA9IGNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7XG5cbiAgICB0aGlzLmFkc0xvYWRlci5yZXF1ZXN0QWRzKGFkc1JlcXVlc3QpO1xuICB9XG5cbiAgX29uQWRzTWFuYWdlckxvYWRlZChhZHNNYW5hZ2VyTG9hZGVkRXZlbnQpIHtcbiAgICBjb25zdCB7IHZpZGVvRWxlbWVudCB9ID0gdGhpcztcblxuICAgIC8vIEdldCB0aGUgYWRzIG1hbmFnZXIuXG4gICAgY29uc3QgYWRzUmVuZGVyaW5nU2V0dGluZ3MgPSBuZXcgZ29vZ2xlLmltYS5BZHNSZW5kZXJpbmdTZXR0aW5ncygpO1xuICAgIGFkc1JlbmRlcmluZ1NldHRpbmdzLnJlc3RvcmVDdXN0b21QbGF5YmFja1N0YXRlT25BZEJyZWFrQ29tcGxldGUgPSB0cnVlO1xuICAgIGFkc1JlbmRlcmluZ1NldHRpbmdzLmVuYWJsZVByZWxvYWRpbmcgPSB0cnVlO1xuXG4gICAgLy8gVGhlIFNESyBpcyBwb2xsaW5nIGN1cnJlbnRUaW1lIG9uIHRoZSBjb250ZW50UGxheWJhY2suIEFuZCBuZWVkcyBhIGR1cmF0aW9uXG4gICAgLy8gc28gaXQgY2FuIGRldGVybWluZSB3aGVuIHRvIHN0YXJ0IHRoZSBtaWQtIGFuZCBwb3N0LXJvbGwuXG4gICAgdGhpcy5hZHNNYW5hZ2VyID0gYWRzTWFuYWdlckxvYWRlZEV2ZW50LmdldEFkc01hbmFnZXIoXG4gICAgICB2aWRlb0VsZW1lbnQsXG4gICAgICBhZHNSZW5kZXJpbmdTZXR0aW5nc1xuICAgICk7XG5cbiAgICAvLyBHZXQgdGhlIGN1ZSBwb2ludHMgZm9yIGFueSBtaWQtcm9sbHMgYnkgZmlsdGVyaW5nIG91dCB0aGUgcHJlLSBhbmQgcG9zdC1yb2xsLlxuICAgIHRoaXMuYWRzQ3VlUG9pbnRzID0gdGhpcy5hZHNNYW5hZ2VyXG4gICAgICAuZ2V0Q3VlUG9pbnRzKClcbiAgICAgIC5maWx0ZXIoeCA9PiB4ID4gMCAmJiB4ICE9PSAtMSk7XG5cbiAgICAvLyBBZGQgbGlzdGVuZXJzIHRvIHRoZSByZXF1aXJlZCBldmVudHMuXG4gICAgdGhpcy5hZHNNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBnb29nbGUuaW1hLkFkRXJyb3JFdmVudC5UeXBlLkFEX0VSUk9SLFxuICAgICAgYWRFcnJvciA9PiB0aGlzLl9vbkFkRXJyb3IoYWRFcnJvcilcbiAgICApO1xuICAgIHRoaXMuYWRzTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuQ09OVEVOVF9QQVVTRV9SRVFVRVNURUQsXG4gICAgICBhZEV2ZW50ID0+IHRoaXMuX29uQWRFdmVudChhZEV2ZW50KSk7XG4gICAgdGhpcy5hZHNNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5DT05URU5UX1JFU1VNRV9SRVFVRVNURUQsXG4gICAgICBhZEV2ZW50ID0+IHRoaXMuX29uQWRFdmVudChhZEV2ZW50KSk7XG4gICAgdGhpcy5hZHNNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5BTExfQURTX0NPTVBMRVRFRCxcbiAgICAgIGFkRXZlbnQgPT4gdGhpcy5fb25BZEV2ZW50KGFkRXZlbnQpXG4gICAgKTtcbiAgICB0aGlzLmFkc01hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkFEX0JSRUFLX1JFQURZLFxuICAgICAgYWRFdmVudCA9PiB0aGlzLl9vbkFkRXZlbnQoYWRFdmVudClcbiAgICApO1xuXG4gICAgLy8gTGlzdGVuIHRvIGFueSBhZGRpdGlvbmFsIGV2ZW50cywgaWYgbmVjZXNzYXJ5LlxuICAgIHRoaXMuYWRzTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkxPQURFRCwgYWRFdmVudCA9PlxuICAgICAgdGhpcy5fb25BZEV2ZW50KGFkRXZlbnQpXG4gICAgKTtcbiAgICB0aGlzLmFkc01hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5TVEFSVEVELCBhZEV2ZW50ID0+XG4gICAgICB0aGlzLl9vbkFkRXZlbnQoYWRFdmVudClcbiAgICApO1xuICAgIHRoaXMuYWRzTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuQ09NUExFVEUsXG4gICAgICBhZEV2ZW50ID0+IHRoaXMuX29uQWRFdmVudChhZEV2ZW50KVxuICAgICk7XG4gIH1cblxuICBfb25BZEV2ZW50KGFkRXZlbnQpIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gdGhpcy5wbHlyLmVsZW1lbnRzO1xuXG4gICAgLy8gUmV0cmlldmUgdGhlIGFkIGZyb20gdGhlIGV2ZW50LiBTb21lIGV2ZW50cyAoZS5nLiBBTExfQURTX0NPTVBMRVRFRClcbiAgICAvLyBkb24ndCBoYXZlIGFkIG9iamVjdCBhc3NvY2lhdGVkLlxuICAgIGNvbnN0IGFkID0gYWRFdmVudC5nZXRBZCgpO1xuXG4gICAgLy8gU2V0IHRoZSBjdXJyZW50bHkgcGxheWVkIGFkLiBUaGlzIGluZm9ybWF0aW9uIGNvdWxkIGJlIHVzZWQgYnkgY2FsbGJhY2tcbiAgICAvLyBldmVudHMuXG4gICAgdGhpcy5jdXJyZW50QWQgPSBhZDtcblxuICAgIC8vIGxldCBpbnRlcnZhbFRpbWVyO1xuXG4gICAgc3dpdGNoIChhZEV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuTE9BREVEOlxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBldmVudCBzZW50IGZvciBhbiBhZCAtIGl0IGlzIHBvc3NpYmxlIHRvXG4gICAgICAgIC8vIGRldGVybWluZSB3aGV0aGVyIHRoZSBhZCBpcyBhIHZpZGVvIGFkIG9yIGFuIG92ZXJsYXkuXG5cbiAgICAgICAgLy8gU2hvdyB0aGUgYWQgZGlzcGxheSBlbGVtZW50LlxuICAgICAgICB0aGlzLmFkRGlzcGxheUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgICAgICB0aGlzLl9oYW5kbGVFdmVudExpc3RlbmVycyhcIkxPQURFRFwiKTtcblxuICAgICAgICBpZiAoIWFkLmlzTGluZWFyKCkpIHtcbiAgICAgICAgICAvLyBQb3NpdGlvbiBBZERpc3BsYXlDb250YWluZXIgY29ycmVjdGx5IGZvciBvdmVybGF5LlxuICAgICAgICAgIGFkLndpZHRoID0gY29udGFpbmVyLm9mZnNldFdpZHRoO1xuICAgICAgICAgIGFkLmhlaWdodCA9IGNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLlNUQVJURUQ6XG4gICAgICAgIC8vIFRoaXMgZXZlbnQgaW5kaWNhdGVzIHRoZSBhZCBoYXMgc3RhcnRlZCAtIHRoZSB2aWRlbyBwbGF5ZXJcbiAgICAgICAgLy8gY2FuIGFkanVzdCB0aGUgVUksIGZvciBleGFtcGxlIGRpc3BsYXkgYSBwYXVzZSBidXR0b24gYW5kXG4gICAgICAgIC8vIHJlbWFpbmluZyB0aW1lLlxuXG4gICAgICAgIHRoaXMucGx5ci5wYXVzZSgpO1xuICAgICAgICB0aGlzLl9oYW5kbGVFdmVudExpc3RlbmVycyhcIlNUQVJURURcIik7XG5cbiAgICAgICAgLy8gaWYgKGFkLmlzTGluZWFyKCkpIHtcbiAgICAgICAgLy8gRm9yIGEgbGluZWFyIGFkLCBhIHRpbWVyIGNhbiBiZSBzdGFydGVkIHRvIHBvbGwgZm9yXG4gICAgICAgIC8vIHRoZSByZW1haW5pbmcgdGltZS5cbiAgICAgICAgLy8gaW50ZXJ2YWxUaW1lciA9IHNldEludGVydmFsKFxuICAgICAgICAvLyAgICAgKCkgPT4ge1xuICAgICAgICAvLyAgICAgICBsZXQgcmVtYWluaW5nVGltZSA9IHRoaXMuYWRzTWFuYWdlci5nZXRSZW1haW5pbmdUaW1lKCk7XG4gICAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKHJlbWFpbmluZ1RpbWUpO1xuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgIDMwMCk7IC8vIGV2ZXJ5IDMwMG1zXG4gICAgICAgIC8vIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkNPTlRFTlRfUEFVU0VfUkVRVUVTVEVEOlxuICAgICAgICB0aGlzLl9oYW5kbGVFdmVudExpc3RlbmVycyhcIkNPTlRFTlRfUEFVU0VfUkVRVUVTVEVEXCIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuQ09OVEVOVF9SRVNVTUVfUkVRVUVTVEVEOlxuICAgICAgICB0aGlzLl9oYW5kbGVFdmVudExpc3RlbmVycyhcIkNPTlRFTlRfUkVTVU1FX1JFUVVFU1RFRFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkFEX0JSRUFLX1JFQURZOlxuICAgICAgICAvLyBUaGlzIGV2ZW50IGluZGljYXRlcyB0aGF0IGEgbWlkLXJvbGwgYWQgaXMgcmVhZHkgdG8gc3RhcnQuXG4gICAgICAgIC8vIFdlIHBhdXNlIHRoZSBwbGF5ZXIgYW5kIHRlbGwgdGhlIGFkc01hbmFnZXIgdG8gc3RhcnQgcGxheWluZyB0aGUgYWQuXG4gICAgICAgIHRoaXMucGx5ci5wYXVzZSgpO1xuICAgICAgICB0aGlzLmFkc01hbmFnZXIuc3RhcnQoKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRXZlbnRMaXN0ZW5lcnMoXCJBRF9CUkVBS19SRUFEWVwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkNPTVBMRVRFOlxuICAgICAgICAvLyBUaGlzIGV2ZW50IGluZGljYXRlcyB0aGUgYWQgaGFzIGZpbmlzaGVkIC0gdGhlIHZpZGVvIHBsYXllclxuICAgICAgICAvLyBjYW4gcGVyZm9ybSBhcHByb3ByaWF0ZSBVSSBhY3Rpb25zLCBzdWNoIGFzIHJlbW92aW5nIHRoZSB0aW1lciBmb3JcbiAgICAgICAgLy8gcmVtYWluaW5nIHRpbWUgZGV0ZWN0aW9uLlxuICAgICAgICAvLyBjbGVhckludGVydmFsKGludGVydmFsVGltZXIpO1xuICAgICAgICB0aGlzLl9oYW5kbGVFdmVudExpc3RlbmVycyhcIkNPTVBMRVRFXCIpO1xuXG4gICAgICAgIHRoaXMuYWREaXNwbGF5RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIGlmICh0aGlzLnBseXIuY3VycmVudFRpbWUgPCB0aGlzLnBseXIuZHVyYXRpb24pIHtcbiAgICAgICAgICB0aGlzLnBseXIucGxheSgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5BTExfQURTX0NPTVBMRVRFRDpcbiAgICAgICAgdGhpcy5faGFuZGxlRXZlbnRMaXN0ZW5lcnMoXCJBTExfQURTX0NPTVBMRVRFRFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBfb25BZEVycm9yKGFkRXJyb3JFdmVudCkge1xuICAgIC8vIEhhbmRsZSB0aGUgZXJyb3IgbG9nZ2luZy5cbiAgICB0aGlzLmFkRGlzcGxheUVsZW1lbnQucmVtb3ZlKCk7XG5cbiAgICBpZiAodGhpcy5hZHNNYW5hZ2VyKSB7XG4gICAgICB0aGlzLmFkc01hbmFnZXIuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Zykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGFkRXJyb3JFdmVudCk7XG4gICAgfVxuICB9XG5cbiAgX3NldHVwQWREaXNwbGF5Q29udGFpbmVyKCkge1xuICAgIGNvbnN0IHsgY29udGFpbmVyLCBvcmlnaW5hbCB9ID0gdGhpcy5wbHlyLmVsZW1lbnRzO1xuXG4gICAgLy8gV2UgYXNzdW1lIHRoZSBhZENvbnRhaW5lciBpcyB0aGUgdmlkZW8gY29udGFpbmVyIG9mIHRoZSBwbHlyIGVsZW1lbnRcbiAgICAvLyB0aGF0IHdpbGwgaG91c2UgdGhlIGFkcy5cbiAgICB0aGlzLmFkRGlzcGxheUNvbnRhaW5lciA9IG5ldyBnb29nbGUuaW1hLkFkRGlzcGxheUNvbnRhaW5lcihjb250YWluZXIpO1xuXG4gICAgdGhpcy5hZERpc3BsYXlFbGVtZW50ID0gY29udGFpbmVyLmZpcnN0Q2hpbGQ7XG5cbiAgICAvLyBUaGUgQWREaXNwbGF5Q29udGFpbmVyIGNhbGwgZnJvbSBnb29nbGUgSU1BIHNldHMgdGhlIHN0eWxlIGF0dHJpYnV0ZVxuICAgIC8vIGJ5IGRlZmF1bHQuIFdlIHJlbW92ZSB0aGUgaW5saW5lIHN0eWxlIGFuZCBzZXQgaXQgdGhyb3VnaCB0aGUgc3R5bGVzaGVldC5cbiAgICB0aGlzLmFkRGlzcGxheUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIik7XG5cbiAgICAvLyBTZXQgY2xhc3MgbmFtZSBvbiB0aGUgYWREaXNwbGF5Q29udGFpbmVyIGVsZW1lbnQuXG4gICAgdGhpcy5hZERpc3BsYXlFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicGx5ci1hZHNcIik7XG5cbiAgICAvLyBQbGF5IGFkcyB3aGVuIGNsaWNrZWQuXG4gICAgdGhpcy5fc2V0T25DbGlja0hhbmRsZXIodGhpcy5hZERpc3BsYXlFbGVtZW50LCB0aGlzLl9wbGF5QWRzKTtcbiAgfVxuXG4gIF9wbGF5QWRzKCkge1xuICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSB0aGlzLnBseXIuZWxlbWVudHM7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBjb250YWluZXIuIE11c3QgYmUgZG9uZSB2aWEgYSB1c2VyIGFjdGlvbiBvbiBtb2JpbGUgZGV2aWNlcy5cbiAgICB0aGlzLmFkRGlzcGxheUNvbnRhaW5lci5pbml0aWFsaXplKCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgYWRzIG1hbmFnZXIuIEFkIHJ1bGVzIHBsYXlsaXN0IHdpbGwgc3RhcnQgYXQgdGhpcyB0aW1lLlxuICAgICAgdGhpcy5hZHNNYW5hZ2VyLmluaXQoXG4gICAgICAgIGNvbnRhaW5lci5vZmZzZXRXaWR0aCxcbiAgICAgICAgY29udGFpbmVyLm9mZnNldEhlaWdodCxcbiAgICAgICAgZ29vZ2xlLmltYS5WaWV3TW9kZS5OT1JNQUxcbiAgICAgICk7XG5cbiAgICAgIC8vIENhbGwgcGxheSB0byBzdGFydCBzaG93aW5nIHRoZSBhZC4gU2luZ2xlIHZpZGVvIGFuZCBvdmVybGF5IGFkcyB3aWxsXG4gICAgICAvLyBzdGFydCBhdCB0aGlzIHRpbWU7IHRoZSBjYWxsIHdpbGwgYmUgaWdub3JlZCBmb3IgYWQgcnVsZXMuXG4gICAgICB0aGlzLmFkc01hbmFnZXIuc3RhcnQoKTtcbiAgICB9IGNhdGNoIChhZEVycm9yKSB7XG4gICAgICAvLyBBbiBlcnJvciBtYXkgYmUgdGhyb3duIGlmIHRoZXJlIHdhcyBhIHByb2JsZW0gd2l0aCB0aGUgVkFTVCByZXNwb25zZS5cbiAgICAgIHRoaXMucGx5ci5wbGF5KCk7XG4gICAgICB0aGlzLmFkRGlzcGxheUVsZW1lbnQucmVtb3ZlKCk7XG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Zykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYWRFcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGhvb2tzIGZvciBQbHlyIGFuZCB3aW5kb3cgZXZlbnRzLiBUaGlzIGVuc3VyZXNcbiAgICogdGhlIG1pZC0gYW5kIHBvc3Qtcm9sbCBsYXVuY2ggYXQgdGhlIGNvcnJlY3QgdGltZS4gQW5kXG4gICAqIHJlc2l6ZSB0aGUgYWR2ZXJ0aXNlbWVudCB3aGVuIHRoZSBwbGF5ZXIgcmVzaXplcy5cbiAgICovXG4gIF9zZXR1cExpc3RlbmVycygpIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gdGhpcy5wbHlyLmVsZW1lbnRzO1xuICAgIGxldCBjdXJyZW50VGltZTtcblxuICAgIC8vIEFkZCBsaXN0ZW5lcnMgdG8gdGhlIHJlcXVpcmVkIGV2ZW50cy5cbiAgICB0aGlzLnBseXIub24oXCJlbmRlZFwiLCBldmVudCA9PiB7XG4gICAgICB0aGlzLmFkc0xvYWRlci5jb250ZW50Q29tcGxldGUoKTtcbiAgICB9KTtcblxuICAgIHRoaXMucGx5ci5vbihcInRpbWV1cGRhdGVcIiwgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgeyBjdXJyZW50VGltZSB9ID0gZXZlbnQuZGV0YWlsLnBseXI7XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudC5jdXJyZW50VGltZSA9IE1hdGguY2VpbChjdXJyZW50VGltZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnBseXIub24oXG4gICAgICBcInNlZWtpbmdcIixcbiAgICAgIGV2ZW50ID0+IChjdXJyZW50VGltZSA9IGV2ZW50LmRldGFpbC5wbHlyLmN1cnJlbnRUaW1lKVxuICAgICk7XG5cbiAgICB0aGlzLnBseXIub24oXCJzZWVrZWRcIiwgZXZlbnQgPT4ge1xuICAgICAgY29uc3Qgc2Vla2VkVGltZSA9IGV2ZW50LmRldGFpbC5wbHlyLmN1cnJlbnRUaW1lO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYWRzQ3VlUG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGN1ZVBvaW50ID0gdGhpcy5hZHNDdWVQb2ludHNbaV07XG4gICAgICAgIGlmIChjdXJyZW50VGltZSA8IGN1ZVBvaW50ICYmIGN1ZVBvaW50IDwgc2Vla2VkVGltZSkge1xuICAgICAgICAgIHRoaXMuYWRzTWFuYWdlci5kaXNjYXJkQWRCcmVhaygpO1xuICAgICAgICAgIHRoaXMuYWRzQ3VlUG9pbnRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gTGlzdGVuIHRvIHRoZSByZXNpemluZyBvZiB0aGUgd2luZG93LiBBbmQgcmVzaXplIGFkIGFjY29yZGluZ2x5LlxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsICgpID0+IHtcbiAgICAgIHRoaXMuYWRzTWFuYWdlci5yZXNpemUoXG4gICAgICAgIGNvbnRhaW5lci5vZmZzZXRXaWR0aCxcbiAgICAgICAgY29udGFpbmVyLm9mZnNldEhlaWdodCxcbiAgICAgICAgZ29vZ2xlLmltYS5WaWV3TW9kZS5OT1JNQUxcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBjYWxsYmFja3MgYWZ0ZXIgYW4gYWQgZXZlbnQgd2FzIGludm9rZWQuXG4gICAqL1xuICBfaGFuZGxlRXZlbnRMaXN0ZW5lcnMoZXZlbnQpIHtcbiAgICBpZiAodHlwZW9mKHRoaXMuZXZlbnRzW2V2ZW50XSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmV2ZW50c1tldmVudF0uY2FsbCh0aGlzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHN0YXJ0IGV2ZW50IGxpc3RlbmVyIG9uIGEgRE9NIGVsZW1lbnQgYW5kIHRyaWdnZXJzIHRoZVxuICAgKiBjYWxsYmFjayB3aGVuIGNsaWNrZWQuXG4gICAqIEBwYXJhbSB7SHRtbEVsbWVudH0gZWxlbWVudCAtIFRoZSBlbGVtZW50IG9uIHdoaWNoIHRvIHNldCB0aGUgbGlzdGVuZXJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBUaGUgY2FsbGJhY2sgd2hpY2ggd2lsbCBiZSBpbnZva2VkIG9uY2UgdHJpZ2dlcmVkLlxuICAgKi9cblxuICBfc2V0T25DbGlja0hhbmRsZXIoZWxlbWVudCwgY2FsbGJhY2spIHtcbiAgICBmb3IgKGxldCBzdGFydEV2ZW50IG9mIHRoaXMuc3RhcnRFdmVudHMpIHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgc3RhcnRFdmVudCxcbiAgICAgICAgZXZlbnQgPT4ge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIChldmVudC50eXBlID09PSBcInRvdWNoZW5kXCIgJiYgc3RhcnRFdmVudCA9PT0gXCJ0b3VjaGVuZFwiKSB8fFxuICAgICAgICAgICAgZXZlbnQudHlwZSA9PT0gXCJjbGlja1wiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBldmVudCBsaXN0ZW5lcnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgdHlwZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZvciB3aGVuIGV2ZW50IG9jY3Vyc1xuICAgKi9cbiAgb24oZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5ldmVudHNbZXZlbnRdID0gY2FsbGJhY2s7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBpbml0OiAodGFyZ2V0LCBvcHRpb25zKSA9PiBuZXcgUGx5ckFkcyh0YXJnZXQsIG9wdGlvbnMpXG59O1xuIl0sIm5hbWVzIjpbImRlZmF1bHRzIiwidXRpbHMiLCJzdGFydEV2ZW50cyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIm1hdGNoIiwib3B0aW9ucyIsIlBseXJBZHMiLCJ0YXJnZXQiLCJjb25maWciLCJtZXJnZUNvbmZpZyIsInRoaXMiLCJhZFRhZ1VybCIsImRlYnVnIiwiRXJyb3IiLCJ3aW5kb3ciLCJnb29nbGUiLCJwbHlyIiwiZ2V0U3RhcnRFdmVudHMiLCJhZERpc3BsYXlDb250YWluZXIiLCJhZERpc3BsYXlFbGVtZW50IiwiYWRzTWFuYWdlciIsImFkc0xvYWRlciIsImFkQ3VlUG9pbnRzIiwiY3VycmVudEFkIiwiZXZlbnRzIiwidmlkZW9FbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiX3NldHVwQWREaXNwbGF5Q29udGFpbmVyIiwiX3NldHVwSU1BIiwiX3NldHVwTGlzdGVuZXJzIiwiY29udGFpbmVyIiwiZWxlbWVudHMiLCJpbWEiLCJBZHNMb2FkZXIiLCJnZXRTZXR0aW5ncyIsInNldEF1dG9QbGF5QWRCcmVha3MiLCJhZGRFdmVudExpc3RlbmVyIiwiQWRzTWFuYWdlckxvYWRlZEV2ZW50IiwiVHlwZSIsIkFEU19NQU5BR0VSX0xPQURFRCIsIl90aGlzIiwiX29uQWRzTWFuYWdlckxvYWRlZCIsImFkRXZlbnQiLCJBZEVycm9yRXZlbnQiLCJBRF9FUlJPUiIsIl9vbkFkRXJyb3IiLCJhZEVycm9yIiwiYWRzUmVxdWVzdCIsIkFkc1JlcXVlc3QiLCJsaW5lYXJBZFNsb3RXaWR0aCIsIm9mZnNldFdpZHRoIiwibGluZWFyQWRTbG90SGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwibm9uTGluZWFyQWRTbG90V2lkdGgiLCJub25MaW5lYXJBZFNsb3RIZWlnaHQiLCJyZXF1ZXN0QWRzIiwiYWRzTWFuYWdlckxvYWRlZEV2ZW50IiwiYWRzUmVuZGVyaW5nU2V0dGluZ3MiLCJBZHNSZW5kZXJpbmdTZXR0aW5ncyIsInJlc3RvcmVDdXN0b21QbGF5YmFja1N0YXRlT25BZEJyZWFrQ29tcGxldGUiLCJlbmFibGVQcmVsb2FkaW5nIiwiZ2V0QWRzTWFuYWdlciIsImFkc0N1ZVBvaW50cyIsImdldEN1ZVBvaW50cyIsImZpbHRlciIsIngiLCJfdGhpczIiLCJBZEV2ZW50IiwiQ09OVEVOVF9QQVVTRV9SRVFVRVNURUQiLCJfb25BZEV2ZW50IiwiQ09OVEVOVF9SRVNVTUVfUkVRVUVTVEVEIiwiQUxMX0FEU19DT01QTEVURUQiLCJBRF9CUkVBS19SRUFEWSIsIkxPQURFRCIsIlNUQVJURUQiLCJDT01QTEVURSIsImFkIiwiZ2V0QWQiLCJ0eXBlIiwic3R5bGUiLCJkaXNwbGF5IiwiX2hhbmRsZUV2ZW50TGlzdGVuZXJzIiwiaXNMaW5lYXIiLCJ3aWR0aCIsImhlaWdodCIsInBhdXNlIiwic3RhcnQiLCJjdXJyZW50VGltZSIsImR1cmF0aW9uIiwicGxheSIsImFkRXJyb3JFdmVudCIsInJlbW92ZSIsImRlc3Ryb3kiLCJBZERpc3BsYXlDb250YWluZXIiLCJmaXJzdENoaWxkIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiX3NldE9uQ2xpY2tIYW5kbGVyIiwiX3BsYXlBZHMiLCJpbml0aWFsaXplIiwiaW5pdCIsIlZpZXdNb2RlIiwiTk9STUFMIiwib24iLCJjb250ZW50Q29tcGxldGUiLCJldmVudCIsImRldGFpbCIsIk1hdGgiLCJjZWlsIiwic2Vla2VkVGltZSIsImkiLCJfdGhpczMiLCJsZW5ndGgiLCJjdWVQb2ludCIsImRpc2NhcmRBZEJyZWFrIiwic3BsaWNlIiwicmVzaXplIiwiY2FsbCIsImVsZW1lbnQiLCJjYWxsYmFjayIsInN0YXJ0RXZlbnQiLCJvbmNlIl0sIm1hcHBpbmdzIjoiNkxBQ0EsSUFBTUEsWUFDUSx3QkFFRyxPQUNILGdCQUNDLHk1Q0NKRkMsa0JBR08sZUFDUkMsR0FBZSxnQkFJZkMsVUFBVUMsVUFBVUMsTUFBTSxZQUMxQkYsVUFBVUMsVUFBVUMsTUFBTSxVQUMxQkYsVUFBVUMsVUFBVUMsTUFBTSxrQkFDWCxhQUFjLFdBQVksY0FFdENILGVBSUUsU0FBQ0YsRUFBVU0sZUFDVE4sRUFBYU0sS0NWMUJDLHdCQUNRQyxFQUFRRixxQkFFYkcsT0FBU1IsRUFBTVMsWUFBWVYsRUFBVU0sSUFHckNLLEtBQUtGLE9BQU9HLFNBQVUsSUFDckJELEtBQUtGLE9BQU9JLFlBQ1IsSUFBSUMsTUFBTSxnQ0FFWEgsU0FJSkksT0FBT0MsT0FBUSxJQUNkTCxLQUFLRixPQUFPSSxZQUNSLElBQUlDLE1BQU0sNkNBRVhILFVBR0pNLEtBQU9ULE9BQ1BOLFlBQWNELEVBQU1pQixzQkFDcEJDLHdCQUNBQyxzQkFDQUMsZ0JBQ0FDLGVBQ0FDLGlCQUNBQyxlQUNBQyxlQUNBQyxhQUFlQyxTQUFTQyxjQUFjLGNBR3RDQyxnQ0FHQUMsaUJBR0FDLDJFQUlHQyxFQUFjckIsS0FBS00sS0FBS2dCLFNBQXhCRCxlQUdIVixVQUFZLElBQUlOLE9BQU9rQixJQUFJQyxVQUM5QnhCLEtBQUtRLG1CQUNMUixLQUFLZSxtQkFJRkosVUFBVWMsY0FBY0MscUJB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
